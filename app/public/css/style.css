/* my_web_project/app/public/css/style.css */

/* 全体の基本設定 */
body {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    background-color: #f8f9fa;
    font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
}

/* ヘッダーのカスタマイズ */
header {
    box-shadow: 0 2px 4px rgba(0, 0, 0, .1);
    position: sticky;
    top: 0;
    z-index: 1020; /* Bootstrapのnavbar-fixed-topと同じz-index */
}

header .h3 {
    font-weight: 600;
}

header .navbar {
    box-shadow: none;
    margin-top: 0;
    margin-bottom: 0;
}

.navbar .nav-link {
    font-weight: 500;
}

.navbar .dropdown-menu {
    border-radius: 0.5rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, .1);
}

.navbar .dropdown-item:hover {
    background-color: #e9ecef;
}

/* メインコンテンツとサイドバーのラッパー */
/* Flexboxの基本設定 */
#main-content-wrapper {
    flex-grow: 1; /* 残りの高さを占める */
    display: flex;
    flex-direction: column; /* スマホでは縦並び */
    min-height: 0; /* flexアイテムが内容で溢れるのを防ぐ */
    overflow: hidden; /* コンテンツがはみ出さないように */
}

/* メインコンテンツエリアの基本スタイル */
#main-content-area { /* HTMLで追加したID */
    flex-grow: 1; /* 残りの幅を占める */
    padding: 20px; /* メインコンテンツの基本的なパディング */
    overflow-y: auto; /* 縦方向にスクロールが必要な場合にスクロールバーを表示 */
    -webkit-overflow-scrolling: touch; /* iOSでのスムーズなスクロール */
    transition: margin-left 0.3s ease-in-out; /* サイドバー開閉時のアニメーション */
}

/* サイドバーのカスタマイズ */
.offcanvas {
    width: 250px; /* サイドバーの標準幅 */
    box-shadow: 2px 0 5px rgba(0, 0, 0, .1);
    z-index: 1010;
}

/* OffcanvasのbackdropはBootstrapが制御するので、通常はCSSで触らない */
/* 意図的に無効にしたい場合は、data-bs-backdrop="false" をHTMLに記述 */
.offcanvas-backdrop {
    /* 必要なければこのブロックは完全に削除しても良い */
    /* visibility: hidden; はBootstrapによって自動的に制御される */
    /* display: none; はBootstrapによって自動的に制御される */
}

/* サイドバーメニュー (アコーディオン) */
.accordion-button {
    font-weight: 600;
}

.accordion-body ul li a {
    padding-left: 1rem;
    font-size: 0.95em;
    border-left: 3px solid transparent;
    transition: border-left-color .2s ease-in-out;
}

.accordion-body ul li a:hover {
    border-left-color: #007bff;
    color: #007bff !important;
    background-color: #e9ecef;
}

/* パンくずリストのカスタマイズ */
.breadcrumb {
    font-size: 0.9em;
}

.breadcrumb-item a {
    color: #007bff;
    text-decoration: none;
}

.breadcrumb-item.active {
    color: #6c757d;
}

/* フッターのカスタマイズ */
footer {
    border-top: 1px solid #333;
    padding: 20px 0;
    background-color: #343a40;
    color: #f8f9fa;
    margin-top: auto; /* これでフッターが常に最下部に固定されます */
}

footer h5 {
    color: #007bff;
    margin-bottom: 15px;
    font-weight: 600;
}

footer ul li a {
    color: #f8f9fa;
    text-decoration: none;
}

footer ul li a:hover {
    color: #ced4da !important;
}

footer .fab {
    transition: color .2s ease-in-out;
}

footer .fab:hover {
    color: #007bff;
}

/* アイコンとテキストの間隔 */
.me-1 {
    margin-right: 0.25rem !important;
}

.me-2 {
    margin-right: 0.5rem !important;
}


/* ----------------------------------------------------- */
/* レスポンシブ調整 - 中画面以上 (768px) */
/* ----------------------------------------------------- */

@media (min-width: 768px) {
    /* メインのラッパーを横並びにする */
    #main-content-wrapper {
        flex-direction: row !important; /* サイドバーとメインコンテンツを横並びにする */
    }

    /* PCビューでのサイドバーの表示 */
    .offcanvas-start {
        position: sticky; /* スクロールしても固定 */
        top: 0; 
        left: 0;
        height: 100vh; /* ビューポートの高さ全体 */
        transform: none !important; /* Offcanvasのトランスフォームを強制的に無効化（常時表示）*/
        visibility: visible !important; /* Offcanvasのvisibilityを強制的に可視に */
        border-right: 1px solid rgba(0, 0, 0, .1); /* 必要であれば区切り線 */
        padding: 0; /* Bootstrapのオフキャンバスのパディングをリセット */
        width: 250px; /* PCでのサイドバーの幅 */
        flex-shrink: 0; /* サイドバーが縮まないように */
        transition: transform 0.3s ease-in-out; /* サイドバー開閉時のアニメーション */
    }

    /* メインコンテンツエリアの調整 */
    #main-content-area {
        margin-left: 250px; /* サイドバーの幅と同じマージン */
        flex-grow: 1; /* 残りの幅を占めるように */
        transition: margin-left 0.3s ease-in-out; /* アニメーション */
    }

    /* body に sidebar-collapsed クラスが付与されたときのスタイル */
    body.sidebar-collapsed .offcanvas-start {
        transform: translateX(-250px) !important; /* サイドバーを完全に隠す */
    }

    body.sidebar-collapsed #main-content-area {
        margin-left: 0 !important; /* サイドバーが隠れたらマージンを0に */
        flex: 1 1 100% !important; /* flex-grow: 1, flex-shrink: 1, flex-basis: 100% (全幅に広げる) */
        /* width: 100% !important; */ /* flex: 1 1 100% でうまくいかない場合、こちらも試す */
    }

    /* ヘッダーの小画面用サイドバーボタンを非表示に */
    /* より高い優先順位で確実に非表示にする */
    header button.d-md-none { 
        display: none !important;
    }

    /* サイドバー内の閉じるボタンを非表示に */
    .offcanvas-header .btn-close { 
        display: none !important;
    }

    /* ヘッダーの検索窓を大画面で表示 (d-none d-md-inline-flex クラスを持つ form をターゲット) */
    header form.d-none.d-md-inline-flex {
        display: inline-flex !important;
    }
}

/* スマホサイズ (767.98px 以下) での調整 */
@media (max-width: 767.98px) {
    /* PC用トグルボタンをスマホで非表示に */
    /* id="sidebarToggleBtn" は d-none d-md-inline-flex を持っているので、より確実に非表示に */
    #sidebarToggleBtn {
        display: none !important;
    }

    /* スマホではメインコンテンツエリアのマージンをリセット */
    #main-content-area {
        margin-left: 0 !important;
        flex-grow: 1; /* 必要に応じて残りの幅を占める */
        width: 100%; /* スマホでは全幅に */
    }
}